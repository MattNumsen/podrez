<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/leaf.ico">

    <title>Podrez - Create Program</title>

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.3/angular-route.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    

    
    
    <link rel="stylesheet" type="text/css" href="/stylesheets/index.css"/>
    <link rel="stylesheet" type="text/css" href="/stylesheets/grid.css"/>
    <link rel="stylesheet" type="text/css" href="/stylesheets/navbar.css"/> 

    <script>
    $(document).ready(function(){
      var date_input=$('input[name="date"]'); //our date input has the name "date"
      var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
      var options={
        format: 'mm/dd/yyyy',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      date_input.datepicker(options);
    });
    </script>
    <script>
    $(document).ready(function(){
      var datepicker = $.fn.datepicker.noConflict();
      $.fn.bootstrapDP = datepicker;  
      $("#dp3").bootstrapDP();    
    });
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            $(".select2").select2();
        });
    </script>  
    
    <script> 
    $(document).ready(function(){
      $("#header").load("/header.html"); 
    });
    </script> 
   
    <script>
    $(document).ready(function() {
          $("#building").change(function(){
          var count=$('#building :selected').length;
          $("#buildingCount").val(count);
       });
    });
    </script>

    <script>
    $(document).ready(function() {
          $("#collaborators").change(function(){
          var count=$('#collaborators :selected').length;
          $("#collabCount").val(count);
       });
    });
    </script>

  


 

  </head>

  <body>
    <!-- Header + Title -->
    <div id="header"></div>

    
    <div class="container">
      <div class="jumbotron" id="mainBody-jumbo">
        <h2>Propose a Program</h2>
        <form id="programCreateForm" method="post" action="/createProgram" name="program"> 

          <table class="table">
            <tbody>

              <tr>
                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Name of Program</div>
                    <input type="text" class="form-control" placeholder="Think of something catchy!" id="programTitle" name="title" form="programCreateForm">
                  </div>
                </td>

                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Type of Program</div>
                   
                        <select class="select2" form="programCreateForm" name="type" style="min-width:20%; width:100%">
                          <option value="1">Active</option>
                          <option value="2">Passive</option>
                          <option value="3">Other</option>
                        </select>

                  </div>
                </td>
              </tr>

              <tr>
                <td>                
                  <div class="input-group">
                    <div class="input-group-addon" id="login_area">Date of Program</div>
                    <div class="form-group"> <!-- Date input -->
                      <input class="form-control" id="dp3" form="programCreateForm" name="date" placeholder="MM/DD/YYY" type="text"/>
                    </div>
                  </div>
                </td>

                <td>                
                  <div class="input-group">
                    <div class="input-group-addon">Target Building</div>
                    <select id="building" class="select2" multiple="multiple" form="programCreateForm" name="building" style="min-width:20%; width:100%">


                      <!-- Handlebarify here to add ALL ENTRIES IN BUILDING -->
                      {% for bldng in buildings %}

                        <option value="{{bldng.buildingid}}">{{ bldng.description }}</option>  
                        
                      {% endfor %}

                      
                    </select>
                  </div>
                  <input type='hidden' id="buildingCount" form="programCreateForm" name="buildingCount" value=""/>
                </td>
              </tr>
              <tr>
                <td colspan="2" class="fullwidth">                
                  <div class="input-group">
                    <div class="input-group-addon">Collaborators</div>
                    <select id="collaborators" class="select2" multiple="multiple" form="programCreateForm" name="collaborators" style="min-width:20%;width:100%">


                      <!-- Handlebarify here to add ALL ENTRIES IN RESIDENCE STAFF -->

                    {% for usr in resUser%}
                      {% if usr.permission == 1 %} 
                      <option value="{{usr.resid}}">{{ usr.firstname }} {{usr.lastname}}</option>
                      
                      {% endif %}
                    {% endfor %}

                    </select>
                  </div>
                  <input type='hidden' id="collabCount" form="programCreateForm" name="collabCount" value=""/>
                </td>
              </tr> 

              <tr>
                
                <!--TODO: Add Risk,details, needs that are being addressed in community, AC/RLC in charge, budget request (dollar ammount and description) -->

                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Supervising AC</div>
                    <select class="select2" form="programCreateForm" name="superAC" style="min-width:20%;width:100%">

                    {% for usr in resUser%}
                      {% if usr.permission == 2 %} 
                      <option value="{{usr.resid}}">{{ usr.firstname }} {{usr.lastname}}</option>
                      
                      {% endif %}
                    {% endfor %}

                    </select>
                  </div>
                </td>




                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Supervising RLC</div>
                    <select class="select2" form="programCreateForm" name="superRLC" style="width:100%">

                    {% for usr in resUser%}
                      {% if usr.permission == 3 %} 
                      <option value="{{usr.resid}}">{{ usr.firstname }} {{usr.lastname}}</option>
                      
                      {% endif %}
                    {% endfor %}

                    </select>             
                  </div>
                </td>
              </tr>
              <tr>

                <td colspan="2" class="fullwidth">
                  <div class="input-group">
                    <div class="input-group-addon">Program Description</div>
                    <textarea class="form-control" form="programCreateForm" rows="8" name="description"></textarea>
                  </div>
                </td>
              </tr>

              <tr>
                <td colspan="2" class="fullwidth">
                  <div class="input-group">
                    <div class="input-group-addon">Needs Addressed</div>
                    <textarea class="form-control" form="programCreateForm" rows="4" name="needsMet"></textarea>
                  </div>
                </td>
              </tr>
              <tr>
                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Risk Factors</div>
                    <textarea class="form-control" form="programCreateForm" rows="4" name="riskFactors"></textarea>
                  </div>
                </td>

                <td>
                  <div class="input-group">
                    <div class="input-group-addon">Budget Breakdown<br><br>
                      <div class="input-group">
                        Total ($): 
                        <input type="number" name="budgetVal" form="programCreateForm" min="0.00" step="0.01" max="2500" value="0.00" />
                      </div>
                    </div>
                    <textarea class="form-control" form="programCreateForm" rows="4" name="budgetDesc"></textarea>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>          
          <input class="btn btn-primary" type="submit" value="Submit">
        </form>
      </div>
    </div>



  </body>
</html>
